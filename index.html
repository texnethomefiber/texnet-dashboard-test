<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TEXNET User Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; background: #eef1f5; margin: 0; }
    header {
      background: #0c2540; color: white; padding: 20px; text-align: center;
      font-size: 1.8em; box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    table {
      width: 90%; margin: 30px auto; border-collapse: collapse; box-shadow: 0 0 10px rgba(0,0,0,0.1);
      background: white; border-radius: 10px; overflow: hidden;
    }
    th, td {
      padding: 15px; text-align: left; border-bottom: 1px solid #ddd;
    }
    th {
      background-color: #0c2540; color: white;
    }
    tr.expired { background-color: #ffe5e5; }
    tr.warning { background-color: #fff4e5; }
    tr.active  { background-color: #e5ffe5; }
    .actions button {
      margin-right: 8px; padding: 7px 12px; font-size: 0.9em;
      border: none; border-radius: 5px; cursor: pointer;
    }
    .enable-btn  { background: #4CAF50; color: white; }
    .disable-btn { background: #f44336; color: white; }
    .delete-btn  { background: #555;    color: white; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script>
    const CSV_URL = 'https://raw.githubusercontent.com/texnethomefiber/texnet-dashboard-test/main/user-expiry.csv';function statusOf(expiryStr) {
  const expiry = new Date(expiryStr);
  const now = new Date();
  if (isNaN(expiry)) return 'invalid';
  if (expiry < now) return 'expired';
  const hours = (expiry - now) / 36e5;
  return hours <= 24 ? 'warning' : 'active';
}

function renderTable(data) {
  const table = document.createElement('table');
  const thead = document.createElement('thead');
  thead.innerHTML = `<tr><th>Name</th><th>Phone</th><th>Status</th><th>Actions</th></tr>`;
  table.appendChild(thead);
  const tbody = document.createElement('tbody');

  data.forEach(row => {
    const { Name, Phone, Expiry } = row;
    const status = statusOf(Expiry);
    const tr = document.createElement('tr');
    tr.className = status;
    tr.innerHTML = `
      <td>${Name}</td>
      <td>${Phone}</td>
      <td>${status.charAt(0).toUpperCase() + status.slice(1)}</td>
      <td>
        ${(status === 'expired' || status === 'warning') ? `<button class='enable-btn' onclick="alert('Enable ${Name}')">Enable</button>` : ''}
        ${(status === 'active' || status === 'warning') ? `<button class='disable-btn' onclick="alert('Disable ${Name}')">Disable</button>` : ''}
        <button class='delete-btn' onclick="alert('Delete ${Name}')">Delete</button>
      </td>
    `;
    tbody.appendChild(tr);
  });

  table.appendChild(tbody);
  document.body.appendChild(table);
}

document.addEventListener('DOMContentLoaded', () => {
  Papa.parse(CSV_URL, {
    download: true,
    header: true,
    skipEmptyLines: true,
    complete: (results) => renderTable(results.data),
  });
});

  </script>
</head>
<body>
  <header>TEXNET HOME FIBER - USER DASHBOARD</header>
</body>
</html>
